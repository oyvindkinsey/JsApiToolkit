<!doctype html>
<html>
    <head>
        <title>Sign In</title>
        <script type="text/javascript">
            var target;
            
            var i = location.search.indexOf("target=");
            if (i != -1) {
                target = location.search.substring(i + 7);
            }
            var win;
            if (window.opener) {
                try {
                    if (window.opener.signIn) {
                        win = window.opener;
                    }
                } 
                catch (e1) {
                }
                try {
                    if (!win && window.opener.frames[target] && window.opener.frames[target].signIn) {
                        win = window.opener.frames[target];
                    }
                } 
                catch (e2) {
                }
            }
            
            if (!win) {
                win = window.parent.frames[target];
            }
            
            function signIn(){
                var username = document.getElementById("txtUsername").value;
                var password = document.getElementById("txtPassword").value;
                
                win.signIn(username, password, function(result){
                    if (result) {
                        window.close();
                    }
                    else {
                        // show some kind of status 
                    }
                });
            }
        </script>
    </head>
    <body>
        Username:
        <br/>
        <input type="text" id="txtUsername" value="username"/>
        <br/>
        Password
        <br/>
        <input type="password" id="txtPassword" value="password"/>
        <br/>
        <input type="button" id="btnSignIn" value="Sign In"/>
        <script type="text/javascript">
            document.getElementById("btnSignIn").onclick = signIn;
        </script>
    </body>
</html>
